(this["webpackJsonpbook-treasury"]=this["webpackJsonpbook-treasury"]||[]).push([[0],{142:function(e,t,a){},279:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a.n(c),s=a(135),n=a.n(s),o=(a(142),a(28)),l=a(6),i=a(0);function d(e){var t=r.a.useRef();return Object(i.jsxs)("div",{className:"input-group mb-3",children:[Object(i.jsx)("input",{ref:t,type:"text",className:"form-control",placeholder:e.placeholder,"aria-label":e.placeholder,"aria-describedby":"basic-addon2",onKeyUp:function(a){"Enter"===a.key&&e.action(t.current)}}),Object(i.jsx)("div",{className:"input-group-append",children:Object(i.jsx)("button",{className:"btn-lg btn-success",type:"button",onClick:function(){return e.action(t.current)},children:e.btn_label})})]})}d.defaultProps={placeholder:"Text",btn_label:"Search"};var b=d,u=a(14);function j(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}var h=function(){var e=r.a.useState(localStorage.getItem("theme")||j()),t=Object(u.a)(e,2),a=t[0],c=t[1],s=r.a.useRef();return r.a.useEffect((function(){var e;e=a,localStorage.setItem("theme",e),"dark"===e?(document.body.classList.remove("text-dark"),document.body.classList.remove("bg-light"),document.body.classList.add("text-light"),document.body.classList.add("bg-dark")):(document.body.classList.remove("text-light"),document.body.classList.remove("bg-dark"),document.body.classList.add("text-dark"),document.body.classList.add("bg-light")),s.current&&(s.current.checked="dark"===a)}),[a]),Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("i",{className:"fas fa-sun d-inline-block align-middle px-2",style:{fontSize:"1.2em",color:"#dfd33b"}}),Object(i.jsxs)("div",{className:"form-check form-switch form-control-lg d-inline-block align-middle px-0",children:[Object(i.jsx)("input",{ref:s,className:"form-check-input align-middle mx-auto",type:"checkbox",id:"light_dark_checkbox",defaultChecked:!0,onClick:function(e){c("dark"===a?"light":"dark")}}),Object(i.jsxs)("label",{htmlFor:"light_dark_checkbox",children:[" ",Object(i.jsx)("span",{className:"visually-hidden",children:" Switch Light and Dark modes. "})," "]})]}),Object(i.jsx)("i",{className:"fas fa-moon d-inline align-middle px-2",style:{fontSize:"1.2em"}})]})},m="Book Treasury";function f(e){var t=Object(i.jsx)("a",{href:"gutenberg.org",className:"link-warning",children:"Project Gutenberg\xae"}),a=Object(i.jsxs)("div",{className:"container",children:[Object(i.jsx)("h2",{children:" Read for free, forever "}),Object(i.jsxs)("p",{children:[m," is a site where you can read and download books for free. The site uses the catalogue available from ",t,". The catalogue metadata is occasionally updated from the site. We do not use ",t," for the catalogue metadata information. That being said, the resources (epub view and cover images) are fetched from the site. Please respect the request limits placed there."]}),Object(i.jsx)("h2",{children:" No Ads "}),Object(i.jsx)("p",{children:"The site will remain Advertisement free forever."}),Object(i.jsx)("h2",{children:" We don't track you "}),Object(i.jsx)("p",{children:"No user registration. No cookies. We respect your data and will never track you. We store the page number, theme and font settings locally on your device for your convenience. You can transfer your data to a different device by transferring the local storage key-value pairs for this site."}),Object(i.jsx)("h2",{children:" Open Source "}),Object(i.jsx)("p",{children:"The entire website is open source. You can freely view, deploy, modify, etc the source (as per the license)."})]});return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("button",{type:"button","aria-label":"About",className:"btn","data-bs-toggle":"modal","data-bs-target":"#helpModal",children:Object(i.jsx)("i",{className:"fas fa-question text-success"})}),Object(i.jsx)("article",{className:"modal fade",id:"helpModal",tabIndex:"-1","aria-labelledby":"helpModalLabel","aria-hidden":"true",children:Object(i.jsx)("div",{className:"modal-dialog modal-fullscreen",children:Object(i.jsxs)("div",{className:"modal-content bg-success text-light",children:[Object(i.jsxs)("header",{className:"modal-header container",children:[Object(i.jsx)("h1",{className:"modal-title display-3",id:"helpModalLabel",children:"About"}),Object(i.jsx)("button",{type:"button",className:"btn-close bg-light","data-bs-dismiss":"modal","aria-label":"Close"})]}),Object(i.jsx)("main",{className:"modal-body",children:a}),Object(i.jsxs)("footer",{className:"modal-footer container",children:[m," - ",(new Date).getFullYear()]})]})})})]})}var x=function(e){var t=Object(l.f)();return Object(i.jsxs)("header",{className:"fade-slide-top container py-5 position-relative",children:[Object(i.jsxs)("aside",{style:{position:"absolute",top:"5px",right:"5px"},children:[Object(i.jsx)(h,{}),Object(i.jsx)("div",{className:"px-2 d-inline-block",children:Object(i.jsx)(f,{})})]}),Object(i.jsxs)("div",{className:"row align-items-center",children:[Object(i.jsx)("div",{className:"col-md-8",children:Object(i.jsx)("h1",{className:"display-1",children:Object(i.jsxs)(o.b,{to:"/",className:"text-decoration-none",style:{color:"inherit"},children:[Object(i.jsx)("i",{className:"fas fa-book-reader text-success"}),"\xa0",m]})})}),Object(i.jsx)("div",{className:"col-md-4",children:Object(i.jsx)(b,{placeholder:"Book Title",btn_label:"Search",action:function(e){return t.push("/search/"+e.value)}})})]})]})},O=a(25),p=function(e){return r.a.useEffect((function(){document.title=e.title}),[e.title]),e.children};p.propTypes={title:a.n(O).a.string},p.defaultProps={title:m};var g=p,y=a(87),v=a(2);function k(e){return Object(i.jsx)("div",{style:{width:e.size,height:e.size},className:"spinner-border",role:"status",children:Object(i.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}k.defaultProps={size:"5em"};var N=k;function w(e){return Object(i.jsx)("section",{className:"container",children:Object(i.jsx)("div",{className:"row row-cols-4-lg g-4",children:e.data.map((function(t){return Object(i.jsxs)(r.a.Fragment,{children:[" ",e.card(t)," "]},e.key_fn(t))}))})})}w.defaultProps={data:[]};var S=w,R=a(26),_=a(86),L=a.n(_),I="https://gnikdroy.pythonanywhere.com/api";function E(e){return Object(v.a)(Object(v.a)({},e),{},{cover:P(e),author:q(e)})}function q(e){var t,a=Object(R.a)(e.agents);try{for(a.s();!(t=a.n()).done;){var c=t.value;if("Author"===c.type)return c}}catch(r){a.e(r)}finally{a.f()}return null}function A(e){if(null==e.resources)return null;var t,a=Object(R.a)(e.resources);try{for(a.s();!(t=a.n()).done;){var c=t.value;if(c.uri.endsWith(".epub.images"))return c}}catch(o){a.e(o)}finally{a.f()}var r,s=Object(R.a)(e.resources);try{for(s.s();!(r=s.n()).done;){var n=r.value;if(n.uri.endsWith(".epub.noimages"))return n}}catch(o){s.e(o)}finally{s.f()}return null}function P(e){var t,a=Object(R.a)(e.resources);try{for(a.s();!(t=a.n()).done;){var c=t.value;if("image/jpeg"===c.type&&(c.uri.endsWith(".cover.medium.jpg")||c.uri.endsWith(".cover.medium.jpeg")))return c}}catch(j){a.e(j)}finally{a.f()}var r,s=Object(R.a)(e.resources);try{for(s.s();!(r=s.n()).done;){var n=r.value;if("image/jpeg"===n.type&&(n.uri.endsWith(".cover.small.jpg")||n.uri.endsWith(".cover.small.jpeg")))return n}}catch(j){s.e(j)}finally{s.f()}var o,l=Object(R.a)(e.resources);try{for(l.s();!(o=l.n()).done;){var i=o.value;if("image/png"===i.type&&i.uri.endsWith(".cover.medium.png"))return i}}catch(j){l.e(j)}finally{l.f()}var d,b=Object(R.a)(e.resources);try{for(b.s();!(d=b.n()).done;){var u=d.value;if("image/png"===u.type&&u.uri.endsWith(".cover.small.png"))return u}}catch(j){b.e(j)}finally{b.f()}return null}var C=function(e){var t=E(e),a=null===t.author?"":t.author.person,c=null===t.cover?"/book_treasury/not_available.png":t.cover.uri;return Object(i.jsx)("article",{className:"fade-slide-bottom col my-3 d-flex justify-content-center",children:Object(i.jsxs)("div",{className:"card h-100 bg-success text-white",style:{width:"18rem"},children:[Object(i.jsx)("img",{className:"card-img-top img-fluid",src:c,alt:"Cover"}),Object(i.jsxs)("div",{className:"card-body",children:[Object(i.jsxs)("span",{className:"card-title h5",children:[" ",t.title," "]}),Object(i.jsxs)("p",{className:"card-text",children:[" ",a," "]}),Object(i.jsx)(o.b,{to:"/book/"+t.id,className:"btn btn-outline-light",children:" See Details"})]})]})})};function M(e){return Object(i.jsx)("aside",{className:"alert alert-"+e.type,role:"alert",children:e.children})}M.defaultProps={type:"danger"};var T=M,B={loading:!0,error:!1,books:[],next_page:1,next_available:!0,query:{}};function W(e,t){return"LoadNextPage"===t.type?Object(v.a)(Object(v.a)({},e),{},{next_page:e.next_page+1,loading:!0}):"LoadingSuccessful"===t.type?Object(v.a)(Object(v.a)({},e),{},{books:[].concat(Object(y.a)(e.books),Object(y.a)(t.books)),next_available:t.next_available,loading:!1,error:!1}):"Error"===t.type?Object(v.a)(Object(v.a)({},e),{},{error:!0}):"LoadInitial"===t.type?Object(v.a)(Object(v.a)({},e),{},{books:B.books,next_page:B.next_page,next_available:!0,loading:!0,query:t.query}):new Error("Invalid action type.")}function F(e){var t=r.a.useReducer(W,B),a=Object(u.a)(t,2),c=a[0],s=a[1];c.query!==e.query&&s({type:"LoadInitial",query:e.query});var n=r.a.useRef(),o=r.a.useRef();r.a.useEffect((function(){var t;(t=Object(v.a)(Object(v.a)({},e.query),{},{page:c.next_page}),L.a.get("https://gnikdroy.pythonanywhere.com/api/book",{params:t})).then((function(e){var t=e.data;t.results?s({type:"LoadingSuccessful",books:t.results,next_available:null!==t.next}):s({type:"Error"})})).catch((function(){s({type:"Error"})}))}),[e.query,c.next_page]),o.current&&o.current.disconnect(),o.current=new IntersectionObserver((function(e){!0===e[0].isIntersecting&&(c.loading||c.error||!c.next_available||s({type:"LoadNextPage"}))})),null!=n.current&&o.current.observe(n.current);var l=c.loading&&!c.error,d=c.error&&Object(i.jsx)(T,{children:"The API is inaccessible. Make sure you are connected to the internet."}),b=Object(i.jsx)("aside",{ref:n,className:"d-flex justify-content-center py-5 my-5",children:l&&Object(i.jsx)(N,{})});return Object(i.jsxs)("main",{className:"container",children:[d,Object(i.jsx)(S,{card:C,data:c.books,key_fn:function(e){return e.id}}),b]})}F.defaultProps={};var z=F;var D=function(){return Object(i.jsx)(g,{title:"Home",children:Object(i.jsx)(z,{query:{}})})};function J(e){var t=e.uri.split("/").pop();return Object(i.jsxs)("div",{className:"row",children:[Object(i.jsxs)("div",{className:"col text-start fw-bold",children:[" ",t," "]}),Object(i.jsx)("div",{className:"col",children:Object(i.jsxs)("a",{className:"btn btn-outline-success",href:e.uri,children:[" ",e.type," "]})})]})}function V(e){return Object(i.jsxs)("div",{className:"text-end",children:[Object(i.jsx)("div",{className:"mb-2 h3",children:"Resource Links"}),Object(i.jsx)("div",{children:e.resources.map((function(e){return Object(i.jsx)(r.a.Fragment,{children:J(e)},e.id)}))})]})}function Y(e){var t=null==e.book.author?"":e.book.author.person,a=null==e.book.cover?"/book_treasury/not_available.png":e.book.cover.uri,c=function(e){return Object(i.jsxs)("span",{className:"badge rounded-pill bg-success",children:[" ",e.children," "]})},s=function(e){return e.list.map((function(e){return Object(i.jsxs)(r.a.Fragment,{children:[" ",Object(i.jsx)(c,{children:e})," "]},e)}))};return Object(i.jsx)("div",{className:"container",children:Object(i.jsxs)("div",{className:"row",children:[Object(i.jsxs)("article",{className:"col-md fade-slide-left",children:[Object(i.jsx)("img",{className:"img-fluid",src:a,alt:"Cover"}),Object(i.jsxs)("h1",{children:[" ",e.book.title," "]}),Object(i.jsxs)("p",{className:"h4",children:[" ",t," "]}),Object(i.jsxs)("p",{children:["Type: ",e.book.type,Object(i.jsx)("br",{}),"Downloads: ",e.book.downloads,Object(i.jsx)("br",{}),"Languages: ",e.book.languages.join(", ")," ",Object(i.jsx)("br",{}),"Bookshelves: ",Object(i.jsx)(s,{list:e.book.bookshelves})]}),Object(i.jsx)("a",{href:e.book.license,className:"btn btn-outline-success",children:"License"})]}),Object(i.jsx)("article",{className:"col-md fade-slide-right",children:null!=e.book.resources&&Object(i.jsx)(V,{resources:e.book.resources})})]})})}J.defaultProps={},V.defaultProps={resources:[]},Y.defaultProps={};var G=Y,H=a(19);function K(e,t){return Object(v.a)(Object(v.a)({},H.ReactReaderStyle),{},{container:{overflow:"hidden",flexGrow:1,position:"relative"},readerArea:Object(v.a)(Object(v.a)({},H.ReactReaderStyle.readerArea),{},{backgroundColor:t}),titleArea:Object(v.a)(Object(v.a)({},H.ReactReaderStyle.titleArea),{},{color:e}),tocArea:Object(v.a)(Object(v.a)({},H.ReactReaderStyle.tocArea),{},{background:t,color:e}),tocAreaButton:Object(v.a)(Object(v.a)({},H.ReactReaderStyle.tocAreaButton),{},{color:e,borderBottom:"1px solid "+e}),tocButtonExpanded:Object(v.a)(Object(v.a)({},H.ReactReaderStyle.tocButtonExpanded),{},{background:t}),arrow:Object(v.a)(Object(v.a)({},H.ReactReaderStyle.arrow),{},{background:t,color:e}),loadingView:Object(v.a)(Object(v.a)({},H.ReactReaderStyle.loadingView),{},{color:e})})}function U(e){var t=j();return Q[e]||Q[t]}var Q={dark:{reactReader:K("#e7e7e7","#1d2022"),inner:{body:{color:"#e7e7e7",background:"#1d2022"},a:{color:"#e7e7e7"},"a:hover":{color:"#e7e7e7"}}},light:{reactReader:K("#1d2022","#e7e7e7"),inner:{body:{color:"#1d2022",background:"#e7e7e7"},a:{color:"#1d2022"},"a:hover":{color:"#1d2022"}}},sepia:{reactReader:K("#1d2022","#c5b281"),inner:{body:{color:"#1d2022",background:"#c5b281"},a:{color:"#1d2022"},"a:hover":{color:"#1d2022"}}}},X=Q;function Z(e){var t=r.a.useState((function(){return Number(localStorage.getItem("reader_font_size"))||100})),a=Object(u.a)(t,2),c=a[0],s=a[1],n=r.a.useState((function(){return localStorage.getItem("reader_theme")||j()})),o=Object(u.a)(n,2),l=o[0],d=o[1],b=r.a.useRef(),h=r.a.useRef();r.a.useEffect((function(){localStorage.setItem("reader_font_size",c),b.current&&b.current.themes.fontSize("".concat(c,"%"))}),[c]),r.a.useEffect((function(){localStorage.setItem("reader_theme",l),b.current&&b.current.themes.select(l)}),[l]);var m=U(l).inner.body.color,f=U(l).inner.body.background,x={color:m,backgroundColor:"none",border:"1px solid ".concat(m)},O=Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("button",{className:"btn btn-sm rounded-circle",style:x,onClick:function(){return s(Math.max(80,c-5))},children:Object(i.jsx)("i",{className:"fas fa-search-plus"})}),Object(i.jsxs)("span",{className:"px-1",children:[c,"%"]}),Object(i.jsx)("button",{className:"btn btn-sm rounded-circle",style:x,onClick:function(){return s(Math.min(150,c+5))},children:Object(i.jsx)("i",{className:"fas fa-search-minus"})})]}),p=Object(i.jsx)("div",{children:Object(i.jsxs)("button",{style:{color:m,border:"1px solid ".concat(m)},className:"btn btn-sn",type:"button",onClick:function(){document.fullscreenElement?document.exitFullscreen():h.current.requestFullscreen()},children:[Object(i.jsx)("i",{className:"fas fa-expand"}),"\xa0Expand"]})}),g=function(e){var t=e.theme,a=e.displayName;return Object(i.jsx)("li",{children:Object(i.jsxs)("button",{className:"dropdown-item",onClick:function(){return d(t)},children:[" ",a," "]})})},y=Object(i.jsxs)("div",{className:"dropdown",style:{color:m},children:[Object(i.jsxs)("button",{style:{color:m,border:"1px solid ".concat(m)},className:"btn btn-sm dropdown-toggle",type:"button",id:"dropdownMenuButton1","data-bs-toggle":"dropdown","aria-expanded":"false",children:[Object(i.jsx)("i",{className:"fas fa-palette"}),"\xa0Theme"]}),Object(i.jsxs)("ul",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton1",children:[Object(i.jsx)(g,{theme:"light",displayName:"Light"}),Object(i.jsx)(g,{theme:"dark",displayName:"Dark"}),Object(i.jsx)(g,{theme:"sepia",displayName:"Sepia"})]})]}),k=Object(i.jsx)("aside",{className:"py-1 text-center",style:{background:f,color:m,zIndex:1},children:Object(i.jsxs)("div",{className:"container-fluid row m-auto p-0 align-items-center",children:[Object(i.jsxs)("div",{className:"col d-flex align-items-center justify-content-center",children:[" ",O," "]}),Object(i.jsxs)("div",{className:"col",children:[" ",y," "]}),Object(i.jsxs)("div",{className:"col",children:[" ",p," "]})]})});return Object(i.jsx)("div",{ref:h,className:"mt-5",children:Object(i.jsxs)("main",{style:{height:"100vh"},className:"position-relative d-flex flex-column",children:[Object(i.jsx)(H.ReactReader,Object(v.a)({},Object(v.a)(Object(v.a)({},e),{},{styles:U(l).reactReader,getRendition:function(e){b.current=e,e.themes.fontSize("".concat(c,"%")),e.themes.register(Object.fromEntries(Object.entries(X).map((function(e){var t=Object(u.a)(e,2);return[t[0],t[1].inner]})))),e.themes.select(l)}}))),k]})})}var $=function(){var e=Object(l.g)().id,t=r.a.useState({}),a=Object(u.a)(t,2),c=a[0],s=a[1],n=r.a.useState(!0),o=Object(u.a)(n,2),d=o[0],b=o[1],j=r.a.useState(!1),h=Object(u.a)(j,2),m=h[0],f=h[1],x=r.a.useState((function(){return JSON.parse(localStorage.getItem(e))})),O=Object(u.a)(x,2),p=O[0],y=O[1];r.a.useEffect((function(){(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=I+"/book/"+e;return L.a.get(a,{params:t})})(e).then((function(e){var t=e.data;s(E(t)),b(!1),f(!1)})).catch((function(){f(!0)}))}),[e]),r.a.useEffect((function(){localStorage.setItem(e,JSON.stringify(p))}),[e,p]);var k=m&&Object(i.jsx)(T,{children:"Something went wrong. Make sure you are connected to the internet."}),w=function(e){return Object(i.jsx)("aside",{className:"d-flex justify-content-center py-5 my-5",children:Object(i.jsx)(N,Object(v.a)({},e))})};return Object(i.jsx)(g,{title:"Book Details",children:Object(i.jsxs)("main",{children:[k,0!==Object.keys(c).length&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("section",{className:"container",children:Object(i.jsx)(G,{book:c})}),Object(i.jsx)("section",{children:A(c)&&Object(i.jsx)(Z,{showToc:!0,title:c.title,url:"https://api.codetabs.com/v1/proxy?quest="+A(c).uri,epubInitOptions:{openAs:"epub"},location:p,locationChanged:function(t){y(t),localStorage.setItem(e,JSON.stringify(t))},loadingView:Object(i.jsx)(w,{})})})]}),d&&!m&&Object(i.jsx)(w,{})]})})};var ee=function(e){var t=Object(l.g)().q;return Object(i.jsx)(g,{title:"Search Results for ".concat(t),children:Object(i.jsx)(z,{query:{search:t}})})};var te=function(e){return Object(i.jsx)(g,{title:"404 - Not found",children:Object(i.jsx)("main",{className:"container text-center",children:Object(i.jsxs)(T,{children:[Object(i.jsxs)("h1",{className:"display-1 my-5 py-5",children:[Object(i.jsx)("i",{className:"fas fa-ban"}),"404"]}),Object(i.jsx)("h1",{className:"my-5",children:"Sorry, the page you were looking for doesn't exist. "}),Object(i.jsx)("h2",{children:" Please contact us if you see this page often. "})]})})})};var ae=function(){return Object(i.jsxs)(o.a,{children:[Object(i.jsx)(x,{}),Object(i.jsxs)(l.c,{children:[Object(i.jsx)(l.a,{exact:!0,path:"/",children:Object(i.jsx)(D,{})}),Object(i.jsx)(l.a,{exact:!0,path:"/book_treasury",children:Object(i.jsx)(D,{})}),Object(i.jsx)(l.a,{path:"/book/:id",children:Object(i.jsx)($,{})}),Object(i.jsx)(l.a,{path:"/search/:q",children:Object(i.jsx)(ee,{})}),Object(i.jsx)(l.a,{path:"*",children:Object(i.jsx)(te,{})})]})]})};n.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(ae,{})}),document.getElementById("root"))}},[[279,1,2]]]);
//# sourceMappingURL=main.9cbd9c44.chunk.js.map